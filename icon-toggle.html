<!-- Import Polymer library and a custom component that will be used later.
     More on HTML 5 import feature: http://www.html5rocks.com/en/tutorials/webcomponents/imports/
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icon/iron-icon.html">

<!-- The <dom-module> tag wraps an element's local DOM definition.
In this case, the id attribute shows that this module includes the
local DOM for an element called icon-toggle. -->
<dom-module id="icon-toggle">

    <!--
     The <template> actually defines the element's local DOM structure and styling.
     This is where you'll add markup for your custom element.
     More about Local DOM: https://www.polymer-project.org/1.0/docs/devguide/local-dom
     -->
    <template>

        <!-- These styles don't affect the rest of the document, are local to this component -->
        <style>
            /* local DOM styles go here */
            /* :host defines the current custom element (icon-toggle) */
            :host {
                display: inline-block;
            }
            iron-icon {
                fill: var(--icon-toggle-color, rgba(0,0,0,0));
                stroke: var(--icon-toggle-outline-color, currentcolor);/*set the outline color*/
            }
            :host([pressed]) iron-icon {
                fill: var(--icon-toggle-pressed-color, currentcolor);
            }
        </style>

        <!-- local DOM goes here -->
        <iron-icon icon="[[toggleIcon]]"></iron-icon>
    </template>

    <!-- This javascript is registering the element -->
    <script>
        Polymer({
            /* this is the element's prototype */
            /* the 'is' value has to match the id attribute on dom-module element.
             * By calling this method polymer is registering the lement so it's recognized by the browser*/
            is: 'icon-toggle',
            properties: {
                toggleIcon: String,
                pressed: {
                    type: Boolean,
                    /* The value specifies the property's default value. */
                    value: false,
                    /* The notify property tells Polymer to dispatch property change events when the property value
                       changes. This lets the change be observed by other nodes. */
                    notify: true,
                    /* The reflectToAttribute property tells Polymer to update the corresponding attribute when the
                       property changes. This lets you style the element using an attribute selector,
                       like icon-toggle[pressed]. */
                    reflectToAttribute: true
                }
            },
            /* listeners object maps event names to handler names.
             * 'tap' event is generated by Polymer's gesture system when the user clicks or taps on a target */
            listeners: {
                'tap': 'toggle'
            },
            toggle: function() {
                console.log('invoking toggle....');
                this.pressed = !this.pressed;
                this.fire('toggle');
            },
            /* these functions will be executed as callback every time this element is attached and created */
            attached: function() {
                console.log("icon-toggle attached: ", this.toggleIcon);
            },
            created: function() {
                console.log("icon-toggle created: ", this);
            }
        });
    </script>

</dom-module>

